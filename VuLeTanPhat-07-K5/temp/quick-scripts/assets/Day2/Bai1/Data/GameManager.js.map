{"version":3,"sources":["GameManager.js"],"names":["cc","Class","extends","Component","properties","playerHpLabel","Label","playerMpLabel","playerAtkLabel","playerDefLabel","enemyHpLabel","enemyMpLabel","enemyAtkLabel","enemyDefLabel","messageLabel","attackBtn","Button","skillBtn","recoverBtn","onLoad","initCharacters","updateUI","setupButtonEvents","player","health","energy","attack","randomInRange","defense","enemy","node","on","onAttack","onSkill","onRecover","min","max","Math","floor","random","string","isGameOver","damage","checkGameOver","scheduleOnce","enemyTurn","disableButtons","interactable"],"mappings":"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","file":"GameManager.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Day2\\Bai1\\Data","sourcesContent":["cc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n    // Player labels\r\n    playerHpLabel: cc.Label,\r\n    playerMpLabel: cc.Label,\r\n    playerAtkLabel: cc.Label,\r\n    playerDefLabel: cc.Label,\r\n\r\n    // Enemy labels\r\n    enemyHpLabel: cc.Label,\r\n    enemyMpLabel: cc.Label,\r\n    enemyAtkLabel: cc.Label,\r\n    enemyDefLabel: cc.Label,\r\n\r\n    // Message display\r\n    messageLabel: cc.Label,\r\n\r\n    // Buttons\r\n    attackBtn: cc.Button,\r\n    skillBtn: cc.Button,\r\n    recoverBtn: cc.Button,\r\n  },\r\n\r\n  onLoad() {\r\n    this.initCharacters();\r\n    this.updateUI();\r\n    this.setupButtonEvents();\r\n  },\r\n\r\n  initCharacters() {\r\n    this.player = {\r\n      health: 100,\r\n      energy: 50,\r\n      attack: this.randomInRange(10, 20),\r\n      defense: this.randomInRange(5, 15),\r\n    };\r\n\r\n    this.enemy = {\r\n      health: 100,\r\n      energy: 50,\r\n      attack: this.randomInRange(10, 20),\r\n      defense: this.randomInRange(5, 15),\r\n    };\r\n  },\r\n\r\n  setupButtonEvents() {\r\n    this.attackBtn.node.on(\"click\", this.onAttack, this);\r\n    this.skillBtn.node.on(\"click\", this.onSkill, this);\r\n    this.recoverBtn.node.on(\"click\", this.onRecover, this);\r\n  },\r\n\r\n  randomInRange(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n  },\r\n\r\n  updateUI() {\r\n    this.playerHpLabel.string = `HP: ${Math.max(0, this.player.health)}`;\r\n    this.playerMpLabel.string = `MP: ${this.player.energy}`;\r\n    this.playerAtkLabel.string = `ATK: ${this.player.attack}`;\r\n    this.playerDefLabel.string = `DEF: ${this.player.defense}`;\r\n\r\n    this.enemyHpLabel.string = `HP: ${Math.max(0, this.enemy.health)}`;\r\n    this.enemyMpLabel.string = `MP: ${this.enemy.energy}`;\r\n    this.enemyAtkLabel.string = `ATK: ${this.enemy.attack}`;\r\n    this.enemyDefLabel.string = `DEF: ${this.enemy.defense}`;\r\n  },\r\n\r\n  onAttack() {\r\n    if (this.isGameOver()) return;\r\n\r\n    const damage = Math.max(0, this.player.attack - this.enemy.defense);\r\n    this.enemy.health -= damage;\r\n\r\n    this.updateUI();\r\n    this.checkGameOver();\r\n\r\n    if (!this.isGameOver()) this.scheduleOnce(this.enemyTurn, 1);\r\n  },\r\n\r\n  onSkill() {\r\n    if (this.isGameOver()) return;\r\n\r\n    if (this.player.energy >= 30) {\r\n      this.player.energy -= 30;\r\n      const damage = Math.max(0, this.player.attack * 2 - this.enemy.defense);\r\n      this.enemy.health -= damage;\r\n\r\n      this.updateUI();\r\n      this.checkGameOver();\r\n\r\n      if (!this.isGameOver()) this.scheduleOnce(this.enemyTurn, 1);\r\n    } else {\r\n      this.messageLabel.string = \"❌ Not enough energy!\";\r\n      this.scheduleOnce(() => {\r\n        this.messageLabel.string = \"\";\r\n      }, 2);\r\n    }\r\n  },\r\n\r\n  onRecover() {\r\n    if (this.isGameOver()) return;\r\n\r\n    this.player.energy = Math.min(100, this.player.energy + 20);\r\n\r\n    this.updateUI();\r\n    this.scheduleOnce(this.enemyTurn, 1);\r\n  },\r\n\r\n  enemyTurn() {\r\n    if (this.isGameOver()) return;\r\n\r\n    const damage = Math.max(0, this.enemy.attack - this.player.defense);\r\n    this.player.health -= damage;\r\n\r\n    this.updateUI();\r\n    this.checkGameOver();\r\n  },\r\n\r\n  checkGameOver() {\r\n    if (this.player.health <= 0) {\r\n      this.messageLabel.string = \"💀 You Lose!\";\r\n      this.disableButtons();\r\n    } else if (this.enemy.health <= 0) {\r\n      this.messageLabel.string = \"🏆 You Win!\";\r\n      this.disableButtons();\r\n    }\r\n  },\r\n\r\n  isGameOver() {\r\n    return this.player.health <= 0 || this.enemy.health <= 0;\r\n  },\r\n\r\n  disableButtons() {\r\n    this.attackBtn.interactable = false;\r\n    this.skillBtn.interactable = false;\r\n    this.recoverBtn.interactable = false;\r\n  },\r\n});\r\n"]}